- name: Run Info Test Tasks
  hosts: localhost
  gather_facts: false
  collections:
    - community.general

  tasks:

    - name: Import eco-vcenter credentials
      ansible.builtin.include_vars:
        file: ../../../../scripts/integration_config.yml
      tags: eco-vcenter-ci

    - name: Import vars for testing on eco-vcenter env
      ansible.builtin.include_vars:
        file: ../vars/main.yml
      tags: eco-vcenter-ci

    - name: Import simulator vars
      ansible.builtin.include_vars:
        file: vars.yml
      tags: integration-ci

    - name: Vcsim
      ansible.builtin.import_role:
        name: prepare_soap
      tags: integration-ci

    - name: Vcsim
      ansible.builtin.import_role:
        name: prepare_rest
      tags: integration-ci

    - name: Import info role
      ansible.builtin.import_role:
        name: info_test
      tags:
        - eco-vcenter-ci
        - integration-ci
